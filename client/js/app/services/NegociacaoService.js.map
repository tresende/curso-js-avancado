{"version":3,"sources":["../../app-es6/services/NegociacaoService.js"],"names":["HttpService","ConnectionFactory","NegociacaoDao","Negociacao","NegociacaoService","_http","getConnection","then","connection","dao","listaTodos","negociacao","conexao","adiciona","catch","Error","apagaTodos","console","log","erro","Promise","resolve","reject","get","negociacoes","map","Date","objeto","data","quantidade","valor","error","cb"],"mappings":"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","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from './HttpService';\nimport { ConnectionFactory } from './ConnectionFactory';\nimport { NegociacaoDao } from '../dao/NegociacaoDao';\nimport { Negociacao } from '../models/Negociacao';\n\nexport class NegociacaoService {\n\n    constructor() {\n\n        this._http = new HttpService();\n    }\n\n    lista() {\n\n        return ConnectionFactory\n            .getConnection()\n            .then(connection => new NegociacaoDao(connection))\n            .then(dao => dao.listaTodos())\n    }\n\n    cadastra(negociacao) {\n        return ConnectionFactory\n            .getConnection()\n            .then(conexao => new NegociacaoDao(conexao))\n            .then(dao => dao.adiciona(negociacao))\n            .then(() => 'Negociação cadastrada com sucesso')\n            .catch(erro => {\n                throw new Error(\"Não foi possível adicionar a negociação\")\n            });\n    }\n\n    apaga() {\n\n        return ConnectionFactory\n            .getConnection()\n            .then(connection => new NegociacaoDao(connection))\n            .then(dao => dao.apagaTodos())\n            .then(() => 'Negociações apagadas com sucesso')\n            .catch(erro => {\n                console.log(erro);\n                throw new Error('Não foi possível apagar as negociações')\n            });\n    }\n\n    lista() {\n\n        return ConnectionFactory\n            .getConnection()\n            .then(connection => new NegociacaoDao(connection))\n            .then(dao => dao.listaTodos())\n            .catch(erro => {\n                console.log(erro);\n                throw new Error('Não foi possível obter as negociações')\n            })\n    }\n\n    obterNegociacoesDaSemana() {\n\n        return new Promise((resolve, reject) => {\n            this._http.get('negociacoes/semana')\n                .then(negociacoes => {\n                    resolve(negociacoes.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)))\n                }).catch(error => {\n                    console.log(error)\n                    reject('Não foi possível obter as negociações da semana.');\n                })\n        });\n    }\n\n    obterNegociacoesDaSemanaAnterior() {\n\n        return new Promise((resolve, reject) => {\n            this._http.get('negociacoes/anterior')\n                .then(negociacoes => {\n                    resolve(negociacoes.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)))\n                }).catch(error => {\n                    console.log(error)\n                    reject('Não foi possível obter as negociações da semana anterior.');\n                })\n        });\n    }\n\n    obterNegociacoesDaSemanaRetrasada(cb) {\n        return new Promise((resolve, reject) => {\n            this._http.get('negociacoes/retrasada')\n                .then(negociacoes => {\n                    resolve(negociacoes.map(objeto => new Negociacao(new Date(objeto.data), objeto.quantidade, objeto.valor)))\n                }).catch(error => {\n                    console.log(error)\n                    reject('Não foi possível obter as negociações da semana retrasada.');\n                })\n        });\n    }\n}"]}